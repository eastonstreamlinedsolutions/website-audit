<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamlined Lab | Master Audit Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: white; }
        .glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .sidebar-item:hover { background: rgba(22, 200, 0, 0.1); border-left: 4px solid #16c800; }
        .sidebar-item.active { background: rgba(22, 200, 0, 0.2); border-left: 4px solid #16c800; color: #16c800; }
        input, textarea, select { background: rgba(255,255,255,0.05) !important; border: 1px solid rgba(255,255,255,0.1) !important; color: white !important; padding: 12px; border-radius: 8px; width: 100%; }
        input:focus { border-color: #16c800 !important; outline: none; }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <aside class="w-80 glass border-r border-white/5 flex flex-col">
        <div class="p-8 border-b border-white/5">
            <h1 class="font-black italic text-xl tracking-tighter"><span class="text-[#16c800]">STMLD</span>_DB</h1>
            <p class="text-[10px] uppercase tracking-[0.3em] opacity-40 mt-1">Audit Management System</p>
        </div>

        <div class="p-4 flex-1 overflow-y-auto" id="client-list">
            </div>

        <div class="p-6 border-t border-white/5">
            <button onclick="createNewAudit()" class="w-full py-4 bg-[#16c800] text-black font-black uppercase text-xs tracking-widest rounded-xl hover:scale-105 transition shadow-[0_0_20px_rgba(22,200,0,0.2)]">
                <i class="fa-solid fa-plus mr-2"></i> New Audit
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col overflow-y-auto">
        <header class="px-10 py-6 border-b border-white/5 flex justify-between items-center bg-black/50 sticky top-0 z-10">
            <div>
                <h2 id="current-client-name" class="text-2xl font-black uppercase italic tracking-tighter">Untitled Audit</h2>
                <p id="current-client-id" class="text-[10px] mono opacity-30 uppercase tracking-widest"></p>
            </div>
            <div class="flex gap-4">
                <button onclick="deleteCurrentAudit()" class="px-6 py-2 text-red-500 text-[10px] font-bold uppercase tracking-widest hover:bg-red-500/10 rounded-lg">Delete</button>
                <button onclick="saveCurrentAudit()" class="px-8 py-2 bg-white text-black text-[10px] font-bold uppercase tracking-widest rounded-lg hover:bg-[#16c800] hover:text-black transition">Save Changes</button>
            </div>
        </header>

        <section class="p-12 max-w-4xl">
            <div class="grid grid-cols-2 gap-8 mb-12">
                <div>
                    <label class="text-[10px] font-black uppercase opacity-40 block mb-2">Company Name</label>
                    <input type="text" id="form-name" placeholder="Acme Corp" oninput="updateClientDisplay(this.value)">
                </div>
                <div>
                    <label class="text-[10px] font-black uppercase opacity-40 block mb-2">Website URL</label>
                    <input type="text" id="form-url" placeholder="https://...">
                </div>
            </div>

            <div class="space-y-12">
                <div>
                    <h3 class="text-[#16c800] text-xs font-black tracking-[0.3em] uppercase mb-6 border-b border-[#16c800]/20 pb-2">01 // Performance Audit</h3>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="text-[10px] font-bold opacity-60 block mb-2">Load Speed (Seconds)</label>
                            <input type="number" step="0.1" id="form-speed" placeholder="4.2">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold opacity-60 block mb-2">Page Grade (F-A)</label>
                            <select id="form-grade">
                                <option>A</option><option>B</option><option>C</option><option>D</option><option>F</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-[#16c800] text-xs font-black tracking-[0.3em] uppercase mb-6 border-b border-[#16c800]/20 pb-2">02 // Revenue Leakage</h3>
                    <div>
                        <label class="text-[10px] font-bold opacity-60 block mb-2">Est. Monthly Lost Revenue ($)</label>
                        <input type="number" id="form-revenue" placeholder="12500">
                    </div>
                </div>

                <div>
                    <h3 class="text-[#16c800] text-xs font-black tracking-[0.3em] uppercase mb-6 border-b border-[#16c800]/20 pb-2">03 // Strategic Recommendations</h3>
                    <textarea id="form-notes" rows="6" placeholder="List the top 3 items to fix..."></textarea>
                </div>
            </div>
        </section>
    </main>

    <script>
        let audits = JSON.parse(localStorage.getItem('stml_audits')) || [];
        let activeAuditId = null;

        function createNewAudit() {
            const newAudit = {
                id: 'AUDIT-' + Date.now(),
                name: 'New Client',
                url: '',
                speed: 0,
                grade: 'C',
                revenue: 0,
                notes: '',
                date: new Date().toLocaleDateString()
            };
            audits.unshift(newAudit);
            saveToStorage();
            loadAudit(newAudit.id);
        }

        function loadAudit(id) {
            activeAuditId = id;
            const audit = audits.find(a => a.id === id);
            
            // Update UI
            document.getElementById('current-client-name').innerText = audit.name;
            document.getElementById('current-client-id').innerText = audit.id;
            document.getElementById('form-name').value = audit.name;
            document.getElementById('form-url').value = audit.url;
            document.getElementById('form-speed').value = audit.speed;
            document.getElementById('form-grade').value = audit.grade;
            document.getElementById('form-revenue').value = audit.revenue;
            document.getElementById('form-notes').value = audit.notes;

            renderSidebar();
        }

        function saveCurrentAudit() {
            const index = audits.findIndex(a => a.id === activeAuditId);
            audits[index] = {
                ...audits[index],
                name: document.getElementById('form-name').value,
                url: document.getElementById('form-url').value,
                speed: document.getElementById('form-speed').value,
                grade: document.getElementById('form-grade').value,
                revenue: document.getElementById('form-revenue').value,
                notes: document.getElementById('form-notes').value
            };
            saveToStorage();
            renderSidebar();
            alert('Audit Saved to Database');
        }

        function deleteCurrentAudit() {
            if(confirm('Delete this client permanentely?')) {
                audits = audits.filter(a => a.id !== activeAuditId);
                saveToStorage();
                if(audits.length > 0) loadAudit(audits[0].id);
                else location.reload();
            }
        }

        function updateClientDisplay(val) {
            document.getElementById('current-client-name').innerText = val || 'Untitled Audit';
        }

        function saveToStorage() {
            localStorage.setItem('stml_audits', JSON.stringify(audits));
        }

        function renderSidebar() {
            const list = document.getElementById('client-list');
            list.innerHTML = audits.map(a => `
                <div onclick="loadAudit('${a.id}')" class="sidebar-item p-4 rounded-xl mb-2 cursor-pointer transition ${a.id === activeAuditId ? 'active' : ''}">
                    <p class="text-[10px] opacity-40 font-bold mb-1">${a.date}</p>
                    <h4 class="font-black uppercase italic tracking-tighter text-sm">${a.name}</h4>
                    <p class="text-[10px] opacity-60 truncate">${a.url || 'No URL'}</p>
                </div>
            `).join('');
        }

        // Initial Load
        if(audits.length === 0) createNewAudit();
        else loadAudit(audits[0].id);
    </script>
</body>
</html>
